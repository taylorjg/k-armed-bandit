(this["webpackJsonpk-armed-bandit"]=this["webpackJsonpk-armed-bandit"]||[]).push([[0],{28:function(e,t,n){var r=n(71),a=["runExperiments"];e.exports=function(){var e=new Worker(n.p+"72071a34b129e22549c7.worker.js",{name:"[hash].worker.js"});return r(e,a),e}},29:function(e){e.exports=JSON.parse('{"a":"0.0.9"}')},55:function(e,t){},70:function(e,t,n){},72:function(e,t,n){},73:function(e,t,n){},75:function(e,t,n){},76:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n(0),c=n.n(a),i=n(26),o=n.n(i),u=n(8),s=n(78),l=n(30),f=n(27),p=function(e,t,n){var r=void 0!==n.min&&void 0!==n.max?{ticks:{min:n.min,max:n.max}}:void 0;new f.Chart(e,{type:"line",data:{datasets:t.map((function(e){return{data:e.data,label:e.label,fill:!1,borderColor:e.colour,borderWidth:1,radius:0}}))},options:{legend:{labels:{boxWidth:20}},scales:{xAxes:[{scaleLabel:{display:!0,labelString:"Steps"},labels:t[0].data.map((function(e,t){return t+1})),ticks:{autoSkip:!1,maxRotation:0,callback:function(e){return 1===e?1:e%250===0?e:null}}}],yAxes:[Object(l.a)({scaleLabel:{display:!0,labelString:n.label}},r)]},events:[],animation:{duration:0}}})},b=n(18),d=n(12),h=n(22),j=n(6),m=n(7),S=(n(23),function(e){return Array.from(Array(e).keys())}),v=function(e){return e[Math.floor(Math.random()*e.length)]},O=function(e){var t=Number.NEGATIVE_INFINITY,n=[];return e.forEach((function(e,r){e>t?(t=e,n=[r]):e===t&&n.push(r)})),1===n.length?n[0]:v(n)},g=function(e){return e.reduce((function(e,t){return e+t}),0)/e.length},y=function(){function e(){Object(j.a)(this,e)}return Object(m.a)(e,[{key:"selectAction",value:function(e,t,n,r){return O(n)}},{key:"name",get:function(){return"greedy"}}]),e}(),x=function(){function e(t){Object(j.a)(this,e),this.epsilon=t}return Object(m.a)(e,[{key:"selectAction",value:function(e,t,n,r){return Math.random()<this.epsilon?v(e):O(n)}},{key:"name",get:function(){return"\u03b5-greedy, \u03b5 = ".concat(this.epsilon)}}]),e}(),C=function(){function e(t){Object(j.a)(this,e),this.c=t}return Object(m.a)(e,[{key:"selectAction",value:function(e,t,n,r){return O(this.ucb(t,n,r))}},{key:"ucb",value:function(e,t,n){var r=this;return t.map((function(t,a){var c=e[a];return 0===c?Number.MAX_VALUE:t+r.c*Math.sqrt(Math.log(n)/c)}))}},{key:"name",get:function(){return"UCB, c = ".concat(this.c)}}]),e}(),k=function(e){return function(t){return e}},A=function(e){return 1/e},w=function(){function e(t,n,r,a){var c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;Object(j.a)(this,e),this.actions=t,this.actionSelector=n,this.stepSizeCalculator=r,this.colour=a,this.initialValue=c,this.ns=[],this.qs=[]}return Object(m.a)(e,[{key:"reset",value:function(){this.ns=Array(this.actions.length).fill(0),this.qs=Array(this.actions.length).fill(this.initialValue)}},{key:"update",value:function(e,t){var n=this.ns[e]+1;this.ns[e]=n;var r=this.qs[e],a=r+this.stepSizeCalculator(n)*(t-r);this.qs[e]=a}},{key:"name",get:function(){return this.actionSelector.name}}]),e}(),E=function(e,t){return new w(t,function(e){var t=Object(h.a)(e.actionSelector),n=t[0],r=t.slice(1);switch(n){case"GreedyActionSelector":return Object(b.a)(y,Object(d.a)(r));case"EpsilonGreedyActionSelector":return Object(b.a)(x,Object(d.a)(r));case"UCBActionSelector":return Object(b.a)(C,Object(d.a)(r));default:throw new Error('Unexpected actionSelectorName, "'.concat(n,'"'))}}(e),function(e){var t=Object(h.a)(e.stepSizeCalculator),n=t[0],r=t.slice(1);switch(n){case"decayingStepSizeCalculator":return A;case"constantStepSizeCalculator":return k.apply(void 0,Object(d.a)(r));default:throw new Error('Unexpected stepSizeCalculatorName, "'.concat(n,'"'))}}(e),e.colour,e.initialValue)},N=(n(70),n(28)),z=n.n(N),P=function(e,t,n,r){return function(e,t,n,r){return S(r).map((function(r){return function(e,t,n,r){return t.map((function(t){return t[n][e][r]}))}(e,t,n,r)}))}(e,t,n,r).map(g)},R=function(e,t){var n=e.map((function(e,n){return{label:e.name,colour:e.colour,data:t[n].averageRewardsPerStep}}));p("chart1",n,{label:"Average reward"});var r=e.map((function(e,n){return{label:e.name,colour:e.colour,data:t[n].averagePercentOptimalActionsPerStep}}));p("chart2",r,{label:"% Optimal action",min:0,max:100})},I=S(10),M=2e3,U=function(){var e=Object(a.useState)((function(){return[{actionSelector:["GreedyActionSelector"],stepSizeCalculator:["decayingStepSizeCalculator"],colour:"green"},{actionSelector:["EpsilonGreedyActionSelector",.01],stepSizeCalculator:["decayingStepSizeCalculator"],colour:"red"},{actionSelector:["EpsilonGreedyActionSelector",.1],stepSizeCalculator:["decayingStepSizeCalculator"],colour:"blue"},{actionSelector:["UCBActionSelector",2],stepSizeCalculator:["decayingStepSizeCalculator"],colour:"purple"}]})),t=Object(u.a)(e,1)[0],n=Object(a.useState)((function(){return t.map((function(e){return E(e,I)}))})),c=Object(u.a)(n,1)[0],i=Object(a.useRef)([]),o=Object(a.useState)(0),l=Object(u.a)(o,2),f=l[0],p=l[1],b=Object(a.useState)(0),d=Object(u.a)(b,2),h=d[0],j=d[1],m=Object(a.useState)(!1),v=Object(u.a)(m,2),O=v[0],g=v[1];Object(a.useEffect)((function(){if(f===M&&4===h){var e=function(e){var t=e[0],n=t[0],r=t.length,a=n.averageRewards.length;return S(r).map((function(t){return{averageRewardsPerStep:P("averageRewards",e,t,a),averagePercentOptimalActionsPerStep:P("averagePercentOptimalActions",e,t,a)}}))}(i.current);R(c,e),g(!1)}}),[c,f,h]);var y=function(e){var t=Object(a.useRef)(null);return t.current=e,function(){if(t.current)return t.current.apply(t,arguments)}}((function(e){switch(e.data.type){case"runExperimentsRunCompleted":p((function(e){return e+1}));break;case"runExperimentsResults":j((function(e){return e+1})),i.current.push(e.data.results);break;case"RPC":default:return}})),x=Object(a.useState)((function(){var e=S(4).map(z.a);return e.forEach((function(e){return e.addEventListener("message",y)})),e})),C=Object(u.a)(x,1)[0],k=Object(a.useCallback)((function(){g(!0),p(0),j(0),i.current=[];var e={K:10,ACTIONS:I,RUNS:500,STEPS:1e3,experimentsConfig:t};C.forEach((function(t,n){return t.runExperiments(e,n)})),R(c,c.map((function(){return{averageRewardsPerStep:[],averagePercentOptimalActionsPerStep:[]}})))}),[t,c,C]);Object(a.useEffect)(k,[k]);return Object(r.jsxs)("div",{className:"mainview-layout",children:[Object(r.jsxs)("div",{className:"controls",children:[Object(r.jsx)("span",{children:"Runs completed:"}),Object(r.jsx)(s.a,{min:0,max:M,now:f}),Object(r.jsx)("button",{onClick:function(){return k()},disabled:O,children:"Run"})]}),Object(r.jsx)("div",{className:"chart-wrapper",children:Object(r.jsx)("canvas",{id:"chart1"})}),Object(r.jsx)("div",{className:"chart-wrapper",children:Object(r.jsx)("canvas",{id:"chart2"})})]})},G=n(29),L=(n(72),function(){return Object(r.jsxs)("div",{className:"version",children:["version: ",G.a]})});n(73);var T=function(){return Object(r.jsxs)("div",{className:"App",children:[Object(r.jsx)(U,{}),Object(r.jsx)(L,{})]})},q=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,79)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),c(e),i(e)}))};n(74),n(75);o.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(T,{})}),document.getElementById("root")),q()}},[[76,1,2]]]);
//# sourceMappingURL=main.1e0f5abe.chunk.js.map